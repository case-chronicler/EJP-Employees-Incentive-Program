import{Q as v,T as F,h as f,m as N,o as n,f as d,b as e,a as o,t as m,u as r,g as x,w as h,q as B,e as w,n as j,A as q,J as C,c as M,F as b,Z as V,d as R,l as W,j as D}from"./app-e664243e.js";import{a as S,_ as E}from"./AuthenticatedLayout-850d04dc.js";import{_ as T}from"./PrimaryButton-5191b921.js";import{u as P,i as O,S as U}from"./sweetalert2.all-3a9d8148.js";import{_ as z}from"./TextInput-c484e117.js";import{_ as J,a as Q}from"./InputLabel-7ced669e.js";import{_ as L}from"./user-d53798a9.js";import"./ApplicationLogo-96ca07fe.js";import"./_plugin-vue_export-helper-c27b6911.js";const Y={class:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Z=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),G={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},H={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},I={class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},K={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},X={class:"sm:flex sm:items-start"},ee={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-gray-100 sm:mx-0 sm:h-10 sm:w-10"},te=e("div",{class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},[e("h3",{class:"text-base font-semibold leading-6 text-gray-900",id:"modal-title"}," Request withdrawal "),e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"}," Please review the details below before sending the request. ")])],-1),se={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},ae={class:"text-red-800 text-sm"},re={id:"fundsRequestForm",class:"space-y-6",action:"#",method:"POST"},oe={class:"mt-3 text-center sm:text-left"},le=e("span",{class:"font-semibold leading-6 text-gray-400 text-sm"}," Balance (USD): ",-1),ne={class:"font-semibold leading-6 text-gray-800 text-sm ml-2"},ie={key:0,class:"font-semibold leading-6 text-red-800 text-sm mt-2"},de={class:"mt-2"},ce=e("div",null,null,-1),ue={class:"flex items-center gap-4"},me={key:0,class:"text-sm text-gray-600"},_e={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},fe=["onClick","disabled"],he={__name:"RequestFunds",props:{allPositions:Array},setup($){const p=v().props.auth.user,u=v().props.userBalance,_=P(),s=F({amount:"",request_sent_by:p.user_id}),c=f(()=>!(!s.amount||Number(s.amount)<0||Number(s.amount)>u)),y=()=>{if(s.processing||!c)return;(document.querySelector("#fundsRequestForm")??!1)&&s.post(route("withdrawal_requests.store"),{onSuccess:()=>{s.reset(),_.closeModal(),U.fire({title:"Withdrawal request sent!",text:"Your request for fund release has been sent to EJP",icon:"success"})}})};return N(()=>{O()}),(g,t)=>(n(),d("div",Y,[Z,e("div",G,[e("div",H,[e("div",I,[e("div",K,[e("div",X,[e("div",ee,[o(S)]),te]),e("div",se,[e("p",ae,m(r(s).errors.amount)+" "+m(r(s).errors.general),1),e("form",re,[e("div",oe,[le,e("span",ne,m(g.$page.props.userBalance),1),c.value?x("",!0):(n(),d("div",ie," Please enter a valid amount "))]),e("div",null,[o(J,{class:"block text-sm font-medium leading-6 text-gray-900",for:"Amount",value:"Amount"}),e("div",de,[o(z,{id:"Amount",type:"number",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",modelValue:r(s).amount,"onUpdate:modelValue":t[0]||(t[0]=a=>r(s).amount=a),required:""},null,8,["modelValue"])]),o(Q,{class:"mt-2",message:r(s).errors.amount},null,8,["message"])]),ce,e("div",ue,[o(B,{"enter-from-class":"opacity-0","leave-to-class":"opacity-0",class:"transition ease-in-out"},{default:h(()=>[r(s).recentlySuccessful?(n(),d("p",me," Request sent ")):x("",!0)]),_:1})])])])]),e("div",_e,[e("button",{onClick:w(y,["prevent"]),disabled:!c.value||r(s).processing,type:"button",class:j(["inline-flex w-full justify-center rounded-md bg-gray-800 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-500 sm:ml-3 sm:w-auto",{"hover:cursor-not-allowed":!c.value||r(s).processing}])}," Send request ",10,fe),e("button",{onClick:t[1]||(t[1]=w((...a)=>r(_).closeModal&&r(_).closeModal(...a),["prevent"])),type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto"}," Cancel ")])])])])]))}};const xe=e("div",{class:"flex items-center space-x-4"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Withdrawals ")],-1),pe={class:"my-16"},ge={class:"max-w-7xl mx-auto px-6 lg:px-8 space-y-14"},ye={key:0,class:"mb-4"},be=e("div",{class:"clear-both"},null,-1),ve={class:"rounded-lg"},we={class:"grid grid-cols-1 gap-4"},$e={class:"rounded-xl border p-5 shadow-md w-full bg-white"},ke={class:"flex w-full items-center justify-between mb-6"},qe={class:"flex items-center space-x-3"},Re={class:"h-8 w-8 rounded-full flex items-center justify-center shadow-lg"},je={class:"text-lg font-bold text-slate-700"},Se={class:"flex items-center justify-center space-x-4"},Pe={class:"text-base text-neutral-500 inline-flex items-center"},Ae={class:"flex items-center justify-between text-slate-500"},Fe={class:"flex space-x-4 md:space-x-8"},Ne=e("span",{class:"middle none center rounded-lg border border-cyan-800 py-1.5 px-3 font-sans text-xs font-bold uppercase text-cyan-500 transition-all hover:opacity-75 focus:ring focus:ring-cyan-200 active:opacity-[0.85] disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none","data-ripple-dark":"true"}," View transaction ",-1),Be={class:"my-8"},Ce={class:"flex float-right"},Me=["href"],Ve=["href"],We=e("div",{class:"clear-both"},null,-1),Ye={__name:"withdrawals",props:{allWithdrawals:Object},setup($){const p=P(),u=$,_=v().props.isEmployeeAnAttorney;q(""),q([]);const s=C({addRole:null});f(()=>{const t=u.users_and_employees;if(s.addRole===null)return t;for(const a in s.addRole)if(Object.hasOwnProperty.call(s.addRole,a)){const i=s.addRole[a];t[a]=i}return t});const c=f(()=>{var t;return((t=u.allWithdrawals)==null?void 0:t.data)??[]}),y=f(()=>{var a;let t=((a=u.allWithdrawals)==null?void 0:a.links)??!1;return t&&(t=t.find(i=>i.label=="Next &raquo;")),t}),g=f(()=>{var a;let t=((a=u.allWithdrawals)==null?void 0:a.links)??!1;return t&&(t=t.find(i=>i.label=="&laquo; Previous")),t});return(t,a)=>(n(),d(b,null,[r(p).currentModal==="REQUEST_FUNDS"?(n(),M(he,{key:0})):x("",!0),o(r(V),{title:"Withdrawals"}),o(E,null,{header:h(()=>[xe]),default:h(()=>{var i,k;return[e("div",pe,[e("div",ge,[r(_)?x("",!0):(n(),d("div",ye,[o(T,{onClick:a[0]||(a[0]=w(l=>r(p).openRequestFundsModal(),["prevent"])),type:"button",class:"mx-2 float-right"},{default:h(()=>[R("request funds")]),_:1}),be])),e("div",ve,[c.value.length>0?(n(),d(b,{key:0},[e("div",we,[(n(!0),d(b,null,W(c.value,(l,A)=>(n(),d("div",{class:"flex items-center justify-center mb-4",key:A},[e("div",$e,[e("div",ke,[e("div",qe,[e("div",Re,[o(L,{w_class:"w-5",h_class:"h-5"})]),e("div",je,m(l.user_email),1)]),e("div",Se,[e("div",Pe,[o(S,{class:"mr-1"}),R(" "+m(l.withdrawal_request_amount),1)]),e("div",{class:j(["rounded-2xl border bg-neutral-100 px-2 py-1 text-xs font-semibold uppercase",{"text-amber-500":l.withdrawal_request_status=="pending","text-red-700":l.withdrawal_request_status=="failed"||l.withdrawal_request_status=="rejected","text-green-700":l.withdrawal_request_status=="success"}])},m(l.withdrawal_request_status),3)])]),e("div",null,[e("div",Ae,[e("div",Fe,[o(r(D),{href:t.route("withdrawal_requests.show",l.withdrawal_request_link_id),class:"flex cursor-pointer items-center transition hover:text-slate-600"},{default:h(()=>[Ne]),_:2},1032,["href"])])])])])]))),128))]),e("div",Be,[e("div",Ce,[e("a",{href:((i=g.value)==null?void 0:i.url)??"#",class:"flex items-center justify-center px-4 h-10 text-base font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"}," Previous ",8,Me),e("a",{href:((k=y.value)==null?void 0:k.url)??"#",class:"flex items-center justify-center px-4 h-10 ms-3 text-base font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"}," Next ",8,Ve)]),We])],64)):x("",!0)])])])]}),_:1})],64))}};export{Ye as default};
